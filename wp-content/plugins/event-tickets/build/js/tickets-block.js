(()=>{void 0===window.tribe&&(window.tribe={});const{applyFilters:t}=wp.hooks;window.tribe.tickets=window.tribe.tickets||{},window.tribe.dialogs=window.tribe.dialogs||{},window.tribe.dialogs.events=window.tribe.dialogs.events||{},window.tribe.tickets.block={num_attendees:0,event:{}},function(e,i,o){i.selector={blockFooter:".tribe-tickets__footer",blockFooterAmount:".tribe-amount",blockFooterQuantity:".tribe-tickets__footer__quantity__number",blockSubmit:"#tribe-tickets__submit",classicSubmit:"#tribe-tickets__buy",container:"#tribe-tickets",hidden:"tribe-common-a11y-hidden",item:".tribe-tickets__item",itemExtraAvailable:".tribe-tickets__item__extra__available",itemExtraAvailableQuantity:".tribe-tickets__item__extra__available__quantity",itemOptOut:".tribe-tickets-attendees-list-optout--wrapper",itemOptOutInput:"#tribe-tickets-attendees-list-optout-",itemPrice:".tribe-tickets__sale_price .tribe-amount",itemQuantity:".tribe-tickets__item__quantity",itemQuantityInput:".tribe-tickets-quantity",loader:".tribe-common-c-loader",submit:".tribe-tickets__buy",ticketLoader:".tribe-tickets-loader__tickets-block",validationNotice:".tribe-tickets__notice--error",ticketInCartNotice:"#tribe-tickets__notice__tickets-in-cart",horizontal_datepicker:{container:".tribe_horizontal_datepicker__container",select:".tribe_horizontal_datepicker__container select",day:".tribe_horizontal_datepicker__day",month:".tribe_horizontal_datepicker__month",year:".tribe_horizontal_datepicker__year",value:".tribe_horizontal_datepicker__value"}};const r=e(i.selector.container);0!==r.length&&(i.document=e(document),i.modalSelector={cartForm:".tribe-modal__wrapper--ar #tribe-modal__cart",container:".tribe-modal__wrapper--ar",form:"#tribe-tickets__modal-form",itemRemove:".tribe-tickets__item__remove",itemTotal:".tribe-tickets__item__total .tribe-amount",loader:".tribe-tickets-loader__modal",metaField:".ticket-meta",metaForm:".tribe-modal__wrapper--ar #tribe-modal__attendee_registration",metaItem:".tribe-ticket",submit:".tribe-block__tickets__item__attendee__fields__footer_submit"},i.commerceSelector={edd:"Tribe__Tickets_Plus__Commerce__EDD__Main",rsvp:"Tribe__Tickets__RSVP",tpp:"Tribe__Tickets__Commerce__PayPal__Main",Tribe__Tickets__Commerce__PayPal__Main:"tribe-commerce",Tribe__Tickets__RSVP:"rsvp",Tribe__Tickets_Plus__Commerce__EDD__Main:"edd",Tribe__Tickets_Plus__Commerce__WooCommerce__Main:"woo",tribe_eddticket:"Tribe__Tickets_Plus__Commerce__EDD__Main",tribe_tpp_attendees:"Tribe__Tickets__Commerce__PayPal__Main",tribe_wooticket:"Tribe__Tickets_Plus__Commerce__WooCommerce__Main",woo:"Tribe__Tickets_Plus__Commerce__WooCommerce__Main"},i.tribe_ticket_provider=r.data("provider"),i.postId=TribeTicketOptions.post_id,i.init=function(){0<TribeTicketOptions.availability_check_interval&&i.checkAvailability(),TribeTicketOptions.ajax_preload_ticket_form&&(i.loaderShow(),i.initPrefill()),i.disable(e(i.selector.submit),!0)},i.updateAvailability=function(t){Object.keys(t).forEach((function(o){const r=t[o].available,a=t[o].max_purchase,n=e(i.selector.item+'[data-ticket-id="'+o+'"]');if(0===r){const e=t[o].unavailable_html;n.attr("available",!1),n.removeClass("instock"),n.removeClass("purchasable"),n.find(i.selector.itemQuantity).html(e),n.find(i.selector.itemExtraAvailable).html("")}1<r&&(n.find(i.selector.itemQuantityInput).attr({max:a}),n.find(i.selector.itemExtraAvailableQuantity).html(r))}))},i.updateFooter=function(t){i.updateFooterCount(t),i.updateFooterAmount(t),t.find(".tribe-tickets__footer").addClass("tribe-tickets__footer--active")},i.updateFooterCount=function(t){const o=t.find(i.selector.blockFooter+" "+i.selector.blockFooterQuantity);let r=0;t.find(i.selector.item+" "+i.selector.itemQuantityInput).each((function(){let t=parseInt(e(this).val(),10);t=isNaN(t)?0:t,r+=t}));const a=0>=r;i.disable(e(i.selector.submit),a),0>r||o.text(r)},i.updateFooterAmount=function(t){const o=t.find(i.selector.blockFooter+" "+i.selector.blockFooterAmount);let r=0;t.find(i.selector.item+" "+i.selector.itemQuantityInput).each((function(){const t=e(this).closest(i.selector.item).find(i.selector.itemPrice).first();let o=parseInt(e(this).val(),10);o=isNaN(o)?0:o;let a=t.text();a=i.cleanNumber(a),r+=a*o})),0>r||o.text(i.numberFormat(r))},i.updateFormTotals=function(t){i.updateFooter(t),i.appendARFields(t)},i.updateItem=function(t,o,r){const a={};if(a.id=t,r){a.qty=i.getQty(r),a.price=i.getPrice(o),o.find(i.selector.itemQuantityInput).val(a.qty).trigger("change");const t=i.selector.itemOptOutInput+r.data("ticket-id");a.$optOut=e(t);const n=e(t+"-modal");a.$optOut.length&&a.$optOut.is(":checked")?n.val("1"):n.val("0")}else a.qty=i.getQty(o),a.price=i.getPrice(o);return i.updateTotal(a.qty,a.price,o),a},i.updateTotal=function(t,e,o){const r=(t*e).toFixed(i.getCurrencyFormatting().number_of_decimals);return o.find(i.modalSelector.itemTotal).text(i.numberFormat(r)),r},i.maybeShowNonMetaNotice=function(t){let o=0,r=0;const a=t.find(i.selector.item).filter((function(){return e(this).find(i.selector.itemQuantityInput).val()>0}));if(!a.length)return;a.each((function(){const t=e(this),a=t.closest(i.selector.item).data("ticket-id");e(i.modalSelector.metaForm).find('.tribe-tickets__item__attendee__fields__container[data-ticket-id="'+a+'"]').length?r+=i.getQty(t):o+=i.getQty(t)}));const n=e(".tribe-tickets__notice--non-ar"),c=e(".tribe-tickets__item__attendee__fields__title");0<o&&0<r?(e("#tribe-tickets__non-ar-count").text(o),n.removeClass("tribe-common-a11y-hidden"),c.show()):(n.addClass("tribe-common-a11y-hidden"),c.hide())},i.getRestEndpoint=function(){return TribeCartEndpoint.url},i.getTickets=function(){let o=e(i.selector.item).map((function(){return e(this).data("ticket-id")})).get();return o=t("tec.tickets.tickets-block.getTickets",o),o},i.maybeShowOptOut=function(t,e){if(t.has(i.selector.itemOptOut).length){const o=t.closest(i.selector.item);0<e?o.addClass("show-optout"):o.removeClass("show-optout")}},i.appendARFields=function(t){t.find(i.selector.item).each((function(){const t=e(this);if(t.is(":visible")){const o=t.closest(i.selector.item).data("ticket-id"),r=e(i.modalSelector.metaForm).find('.tribe-tickets__item__attendee__fields__container[data-ticket-id="'+o+'"]');if(!r.length)return;const a=r.find(i.modalSelector.metaItem),n=i.getQty(t);if(0>=n)return r.removeClass("tribe-tickets--has-tickets"),void r.find(i.modalSelector.metaItem).remove();if(a.length>n){const t=a.length-n;r.find(".tribe-ticket:nth-last-child( -n+"+t+" )").remove()}else if(a.length<n){const t=window.wp.template("tribe-registration--"+o),e=0<a.length?a.length+1:1;r.addClass("tribe-tickets--has-tickets");for(let o=e;o<=n;o++){const e={attendee_id:o};r.append(t(e)),i.maybeHydrateAttendeeBlockFromLocal(a.length)}}}})),i.maybeShowNonMetaNotice(t),i.loaderHide(),i.document.trigger("tribe-ar-fields-appended")},i.stepUp=function(t,e){const o=t.attr("max")?Number(t.attr("max")):-1,r=t.attr("step")?Number(t.attr("step")):1;let a=-1===o||o>=e+r?e+r:o;const n=t.closest(i.selector.item);if("true"===n.attr("data-has-shared-cap")){const t=n.closest("form");a=i.checkSharedCapacity(t,a)}if(0!==a)if(0>a)t[0].value=e+a;else if("function"==typeof t[0].stepUp)try{if(o<e+r)return;t[0].stepUp()}catch(e){t.val(a)}else t.val(a)},i.stepDown=function(t,e){const i=t.attr("min")?Number(t.attr("min")):0,o=t.attr("step")?Number(t.attr("step")):1,r=i<=e-o&&0<e-o?e-o:i;if("function"==typeof t[0].stepDown)try{t[0].stepDown()}catch(e){t[0].value=r}else t[0].value=r},i.checkAvailability=function(){const t=i.getTickets();if(0===t.length)return;const o={action:"ticket_availability_check",tickets:t};e.post(TribeTicketOptions.ajaxurl,o,(function(t){if(!t.success)return;const e=t.data.tickets;i.updateAvailability(e)})),0<TribeTicketOptions.availability_check_interval&&setTimeout(i.checkAvailability,TribeTicketOptions.availability_check_interval)},i.checkSharedCapacity=function(t,o){let r=[],a=[];const n=t.find(i.selector.item).filter('[data-has-shared-cap="true"]'),c=n.find(i.selector.itemQuantityInput);if(!n.length)return o;n.each((function(){r.push(parseInt(e(this).attr("data-shared-cap"),10))})),c.each((function(){a.push(parseInt(e(this).val(),10))})),r=Math.max.apply(this,r),a=a.reduce((function(t,e){return t+e}),0);const s=r-a;return Math.min(s,o)},i.getQty=function(t){const e=parseInt(t.find(i.selector.itemQuantityInput).val(),10);return isNaN(e)?0:e},i.getPrice=function(t){const e=i.cleanNumber(t.find(i.selector.itemPrice).first().text());return isNaN(e)?0:e},i.getCurrencyFormatting=function(){return JSON.parse(TribeCurrency.formatting)[i.tribe_ticket_provider]},i.cleanNumber=function(t){let e=t;const o=i.getCurrencyFormatting();if(0===parseInt(o.number_of_decimals)&&""===o.thousands_sep)return e;if(o.thousands_sep===o.decimal_point){const t=e.length-(o.number_of_decimals+1);e=e.substr(0,t)+"_"+e.substr(t+1),""!==o.thousands_sep&&(e=e.split(o.thousands_sep).join("")),e=e.split("_").join(".")}else""!==o.thousands_sep&&(e=e.split(o.thousands_sep).join("")),""!==o.decimal_point&&(e=e.split(o.decimal_point).join("."));return e},i.numberFormat=function(t){const e=i.getCurrencyFormatting();if(!e)return!1;const o=e.number_of_decimals,r=e.decimal_point,a=e.thousands_sep,n=isFinite(+t)?+t:0,c=isFinite(+o)?Math.abs(o):0,s=void 0===a?",":a,l=void 0===r?".":r,d=function(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i};let _=(c?d(n,c):Math.round(n)).toString().split(l);return"."===e.thousands_sep&&(_=(c?d(n,c):Math.round(n)).toString().split(".")),_[0].length>3&&(_[0]=_[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(_[1]||"").length<c&&(_[1]=_[1]||"",_[1]+=new Array(c-_[1].length+1).join("0")),_.join(l)},i.focusTicketBlock=function(t){e(t).closest(i.modalSelector.metaItem).addClass("tribe-ticket-item__has-focus")},i.unfocusTicketBlock=function(t){e(t).closest(i.modalSelector.metaItem).removeClass("tribe-ticket-item__has-focus")},i.loaderShow=function(t){const o=t||i.selector.ticketLoader;e(i.selector.loader).filter(o).removeClass(i.selector.hidden)},i.loaderHide=function(t){const o=t||i.selector.ticketLoader;e(i.selector.loader).filter(o).addClass(i.selector.hidden)},i.disable=function(t,e){e?t.prop("disabled",!0).attr({disabled:"true","aria-disabled":"true"}):t.prop("disabled",!1).removeProp("disabled").removeAttr("disabled aria-disabled")},i.initPrefill=function(){i.prefillTicketsBlock()},i.initModalFormPrefills=function(){i.loaderShow(i.modalSelector.loader),e.when(i.getData()).then((function(t){i.prefillModalCartForm(e(i.modalSelector.cartForm)),t.meta&&e.each(t.meta,(function(e){r.find('[data-ticket-id="'+e.ticket_id+'"]').length&&i.prefillModalMetaForm(t.meta)}));const o=i.getLocal();o.meta&&i.prefillModalMetaForm(o.meta),window.setTimeout(i.loaderHide,500,i.modalSelector.loader)}))},i.prefillModalMetaForm=function(t){if(void 0===t||0>=t.length)return;const o=e(i.modalSelector.metaForm).find(".tribe-tickets__item__attendee__fields__container");e.each(t,(function(t,r){let a=0;const n=o.find(i.modalSelector.metaItem).filter('[data-ticket-id="'+r.ticket_id+'"]');n.length&&e.each(r.items,(function(t,i){"object"==typeof i&&(e.each(i,(function(t,i){const o=n.eq(a).find('[name*="'+t+'"]');o.is(":radio")||o.is(":checkbox")?o.each((function(){const t=e(this);i===t.val()&&t.prop("checked",!0)})):o.val(i)})),a++)}))})),i.loaderHide(i.modalSelector.loader)},i.prefillModalCartForm=function(t){t.find(i.selector.item).hide();const o=r.find(i.selector.item);e.each(o,(function(i,o){const r=e(o),a=t.find('[data-ticket-id="'+r.attr("data-ticket-id")+'"]');a&&0<r.find(".tribe-tickets-quantity").val()&&a.fadeIn()})),i.appendARFields(t),i.loaderHide(i.modalSelector.loader)},i.prefillTicketsBlock=function(){e.when(i.getData(!0)).then((function(t){const o=t.tickets;if(o.length){let t=0;o.forEach((function(o){const r=e('.tribe-tickets__item[data-ticket-id="'+o.ticket_id+'"]');if("true"===r.attr("data-available")){const e=r.find(i.selector.itemQuantityInput),a=r.find(i.selector.itemOptOutInput+o.ticket_id);e.length&&(e.val(o.quantity),e.trigger("change"),t+=o.quantity,1===parseInt(o.optout,10)&&a.prop("checked","true"))}})),0<t&&e(i.selector.ticketInCartNotice).fadeIn()}i.loaderHide()}),(function(){const t=e(i.selector.ticketInCartNotice);t.removeClass("tribe-tickets__notice--barred tribe-tickets__notice--barred-left").addClass("tribe-tickets__notice--error"),t.find(".tribe-tickets-notice__title").text(TribeMessages.api_error_title),t.find(".tribe-tickets-notice__content").text(TribeMessages.connection_error),t.fadeIn(),i.loaderHide()}))},i.storeLocal=function(){const t=i.getMetaForSave();sessionStorage.setItem("tribe_tickets_attendees-"+i.postId,window.JSON.stringify(t));const e=i.getTicketsForCart();sessionStorage.setItem("tribe_tickets_cart-"+i.postId,window.JSON.stringify(e))},i.getLocal=function(t){const e=t||i.postId,o=window.JSON.parse(sessionStorage.getItem("tribe_tickets_attendees-"+e)),r=window.JSON.parse(sessionStorage.getItem("tribe_tickets_cart-"+e)),a={};return a.meta=o,a.tickets=r,a},i.clearLocal=function(t){const e=t||i.postId;sessionStorage.removeItem("tribe_tickets_attendees-"+e),sessionStorage.removeItem("tribe_tickets_cart-"+e)},i.maybeHydrateAttendeeBlockFromLocal=function(t){e.when(i.getData()).then((function(o){if(!o.meta)return;const r=o.meta.length;if(t<r)return void i.prefillModalMetaForm(o.meta);const a=e(i.modalSelector.metaForm).find(i.modalSelector.metaItem).slice(t-1);a&&a.find(i.modalSelector.metaField).each((function(){const t=e(this),i=t.attr("name"),r=o[i];r&&t.val(r)}))}))},i.getTicketsForCart=function(){const t=[];let o=e(i.modalSelector.cartForm);return o.length||(o=e(i.selector.container)),o.find(i.selector.item).each((function(){const o=e(this),r=o.data("ticketId"),a=o.find(i.selector.itemQuantityInput).val(),n=o.find('[name="attendee[optout]"]');let c=n.val();n.is(":checkbox")&&(c=n.prop("checked")?1:0);const s={};s.ticket_id=r,s.quantity=a,s.optout=c,t.push(s)})),t},i.getMetaForSave=function(){const t=e(i.modalSelector.metaForm).find(i.modalSelector.metaItem),o=[],r=[];return t.each((function(){const t={},o=e(this),a=o.data("ticketId"),n=o.find(i.modalSelector.metaField);n.length&&(r[a]||(r[a]={},r[a].ticket_id=a,r[a].items=[]),n.each((function(){const i=e(this);let o=i.val();const r=i.is(":radio");let a=i.attr("name");if(a=a.split("["),a=a.pop().replace("]",""),(r||i.is(":checkbox"))&&!i.prop("checked")){if(r&&""!==t[a])return;o=""}t[a]=o})),r[a].items.push(t))})),Object.keys(r).forEach((function(t){const e={ticket_id:t,items:r[t].items};o.push(e)})),o},i.getData=function(t){let o={meta:{},tickets:{}};const a=e.Deferred(),n=window.JSON.parse(sessionStorage.getItem("tribe_tickets_attendees-"+i.postId));if(null!==n&&(o.meta=n),!t){const t=window.JSON.parse(sessionStorage.getItem("tribe_tickets_cart-"+i.postId));null!==t&&t.length&&(o.tickets=t),a.resolve(o)}return o.tickets&&o.meta||e.ajax({type:"GET",data:{provider:r.data("providerId"),post_id:i.postId},dataType:"json",url:i.getRestEndpoint(),success(t){null===n&&sessionStorage.setItem("tribe_tickets_attendees-"+i.postId,window.JSON.stringify(t.meta)),sessionStorage.setItem("tribe_tickets_cart-"+i.postId,window.JSON.stringify(t.tickets)),o={meta:t.meta,tickets:t.tickets},a.resolve(o)},error(){a.reject(!1)}}),a.promise()},i.validateForm=function(t){const o=t.find(i.modalSelector.metaItem);let r=!0,a=0;return o.each((function(){const t=e(this);i.validateBlock(t)||(a++,r=!1)})),[r,a]},i.validateBlock=function(t){const o=t.find(i.modalSelector.metaField);let r=!0;return o.each((function(){const t=e(this);i.validateField(t[0])||(r=!1)})),r?t.removeClass("tribe-ticket-item__has-error"):t.addClass("tribe-ticket-item__has-error"),r},i.validateCheckboxRadioGroup=function(t){const e=t.find("input:checked").length,i=t.find("input:required").length;return!!(!i||i&&e)},i.validateHorizontalDatePickerValue=function(t){if(""===t.val()||"null-null-null"===t.val())return!0;const e=t.closest(i.selector.horizontal_datepicker.container),o=e.find(i.selector.horizontal_datepicker.day),r=e.find(i.selector.horizontal_datepicker.month),a=e.find(i.selector.horizontal_datepicker.year);let n=!0;return[o,r,a].forEach((function(t){isNaN(parseInt(t.val()))||parseInt(t.val())<=0?(t.addClass("ticket-meta__has-error"),n=!1):t.removeClass("ticket-meta__has-error")}),n),n},i.validateField=function(t){let o=e(t),r=t.checkValidity();if(!r)if(o=e(t),o.is(":checkbox")||o.is(":radio")){const t=o.closest(".tribe-common-form-control-checkbox-radio-group");t.length&&(r=i.validateCheckboxRadioGroup(t))}else r=!1;return o.is(i.selector.horizontal_datepicker.value)&&(r=i.validateHorizontalDatePickerValue(o)),r?o.removeClass("ticket-meta__has-error"):o.addClass("ticket-meta__has-error"),r},i.document.on("click",".tribe-tickets__item__quantity__remove, .tribe-tickets__item__quantity__add",(function(t){t.preventDefault();const o=e(this).parent().find('input[type="number"]');if(o.is(":disabled"))return!1;const r=Number(o[0].value),a=o.closest(i.modalSelector.cartForm);if(e(this).hasClass("tribe-tickets__item__quantity__add")?i.stepUp(o,r):i.stepDown(o,r),i.updateFooter(o.closest("form")),r!==o[0].value&&o.trigger("change"),a.length){const t=o.closest(i.selector.item);i.updateTotal(i.getQty(t),i.getPrice(t),t)}})),i.document.on("click",i.modalSelector.itemRemove,(function(t){t.preventDefault();const o={},r=e(this).closest("form"),a=e(this).closest(i.selector.item);a.find(i.selector.itemQuantity).val(0),a.fadeOut(),o.id=a.data("ticketId"),o.qty=0,a.find(i.selector.itemQuantityInput).val(o.qty),o.price=i.getPrice(a),i.updateTotal(o.qty,o.price,a),i.updateFormTotals(r),e('.tribe-tickets__item__attendee__fields__container[data-ticket-id="'+o.id+'"]').removeClass("tribe-tickets--has-tickets").find(i.modalSelector.metaItem).remove(),window.setTimeout(i.maybeShowNonMetaNotice,500,r),window.setTimeout((function(){if(0>=r.find(i.selector.item).filter(":visible").length){const t=e(i.selector.blockSubmit).attr("data-content"),o="dialog_obj_"+t.substring(t.lastIndexOf("-")+1);window[o].hide(),i.disable(e(i.selector.submit),!1)}}),500)})),i.document.on("focus",".tribe-ticket .ticket-meta",(function(t){const e=t.target;i.focusTicketBlock(e)})),i.document.on("blur",".tribe-ticket .ticket-meta",(function(t){const e=t.target;i.unfocusTicketBlock(e)})),i.document.on("change keyup",i.selector.itemQuantityInput,(function(t){const o=e(t.target),r=o.closest(i.selector.item),a=o.closest("form"),n=o.attr("max");let c=0,s=parseInt(o.val(),10);s=isNaN(s)?0:s,n<s&&(s=n,o.val(n)),"true"===r.attr("data-has-shared-cap")&&(c=i.checkSharedCapacity(a,s)),0>c&&(s+=c,o.val(s)),t.preventDefault(),i.maybeShowOptOut(r,s),i.updateFooter(a),i.updateFormTotals(a)})),i.document.on("beforeunload",(function(){window.tribe.tickets.modal_redirect?i.clearLocal():i.storeLocal()})),i.document.on("keypress",i.modalSelector.form,(function(t){if(13===t.keyCode){const o=e(t.target).closest(i.modalSelector.form);if("undefined"===o)return;t.preventDefault(),t.stopPropagation(),o.find('[name="cart-button"]').click()}})),i.document.on("click",i.modalSelector.submit,(function(t){t.preventDefault();const o=e(this),r=e(i.modalSelector.form),a=e(i.modalSelector.metaForm),n=i.validateForm(a),c=e(i.selector.validationNotice),s=o.attr("name"),l=r.data("provider");if(i.loaderShow(i.modalSelector.loader),!n[0])return c.find(".tribe-tickets-notice__title").text(TribeMessages.validation_error_title),c.find("p").html(TribeMessages.validation_error),e(i.selector.validationNotice+"__count").text(n[1]),c.show(),i.loaderHide(i.modalSelector.loader),document.getElementById("tribe-tickets__notice__attendee-modal").scrollIntoView({behavior:"smooth",block:"start"}),!1;c.hide(),i.loaderShow(i.modalSelector.loader);let d=TribeTicketsURLs.checkout[l];-1!==s.indexOf("cart")&&(d=TribeTicketsURLs.cart[l]),e(i.modalSelector.form).attr("action",d);const _={tribe_tickets_provider:i.commerceSelector[i.tribe_ticket_provider],tribe_tickets_tickets:i.getTicketsForCart(),tribe_tickets_meta:i.getMetaForSave(),tribe_tickets_post_id:i.postId};e("#tribe_tickets_ar_data").val(JSON.stringify(_)),window.tribe.tickets.modal_redirect=!0,i.clearLocal(),r.submit()})),i.document.on("click",i.selector.classicSubmit,(function(t){t.preventDefault();const o=e(i.selector.container);i.loaderShow(i.selector.loader);const r={tribe_tickets_provider:i.commerceSelector[i.tribe_ticket_provider],tribe_tickets_tickets:i.getTicketsForCart(),tribe_tickets_meta:{},tribe_tickets_post_id:i.postId};o.find("#tribe_tickets_block_ar_data").val(JSON.stringify(r)),o.submit()})),i.document.on("keypress",i.selector.itemQuantityInput,(function(t){13===t.keyCode&&(t.preventDefault(),t.stopPropagation())})),e(o).on("tribe_dialog_show_ar_modal",(function(){i.loaderShow(),i.loaderShow(i.modalSelector.loader);const t=e(i.modalSelector.cartForm);r.find(i.selector.item).each((function(){const o=e(this),r=o.data("ticketId"),a=t.find('[data-ticket-id="'+r+'"]');a&&i.updateItem(r,a,o)})),i.initModalFormPrefills(),i.updateFormTotals(t),i.loaderHide(),i.loaderHide(i.modalSelector.loader)})),e(o).on("tribe_dialog_close_ar_modal",(function(){i.storeLocal()})),i.init(),window.addEventListener("pageshow",(function(t){(t.persisted||void 0!==window.performance&&2===window.performance.navigation.type)&&i.init()})))}(jQuery,window.tribe.tickets.block,window.tribe.dialogs.events),window.tec=window.tec||{},window.tec.tickets=window.tec.tickets||{},window.tec.tickets.ticketsBlock={}})();