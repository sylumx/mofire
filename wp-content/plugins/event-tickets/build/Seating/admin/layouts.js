(()=>{"use strict";var t,e={"0zfD":(t,e,a)=>{a.d(e,{ACTION_ADD_NEW_LAYOUT:()=>u,ACTION_DUPLICATE_LAYOUT:()=>_,ajaxNonce:()=>o,ajaxUrl:()=>c});const n=window?.tec?.tickets?.seating?.ajaxData,{ajaxUrl:c,ajaxNonce:o,ACTION_GET_SEAT_TYPES_BY_LAYOUT_ID:i,ACTION_INVALIDATE_MAPS_LAYOUTS_CACHE:s,ACTION_INVALIDATE_LAYOUTS_CACHE:r,ACTION_DELETE_MAP:d,ACTION_DELETE_LAYOUT:l,ACTION_ADD_NEW_LAYOUT:u,ACTION_DUPLICATE_LAYOUT:_,ACTION_POST_RESERVATIONS:T,ACTION_CLEAR_RESERVATIONS:y,ACTION_FETCH_ATTENDEES:A,ACTION_DELETE_RESERVATIONS:E,ACTION_SEAT_TYPES_UPDATED:w,ACTION_SEAT_TYPE_DELETED:f,ACTION_RESERVATIONS_UPDATED_FROM_SEAT_TYPES:g,ACTION_RESERVATION_CREATED:O,ACTION_RESERVATION_UPDATED:m,ACTION_EVENT_LAYOUT_UPDATED:p,ACTION_REMOVE_EVENT_LAYOUT:I}=n},"Lc+o":(t,e,a)=>{function n(t,e){return e?window?.tec?.tickets?.seating?.utilsData?.localizedStrings?.[e]?.[t]||"":window?.tec?.tickets?.seating?.utilsData?.localizedStrings?.[t]||""}a.d(e,{getLocalizedString:()=>n,onReady:()=>c,redirectTo:()=>o});const c=t=>{"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)};function o(t,e=!1){e?window.open(t,"_blank","noopener,noreferrer"):window.location.href=t}},c4TD:(t,e,a)=>{var n=a("0zfD"),c=a("Lc+o");function o(t){return(0,c.getLocalizedString)(t,"layouts")}async function i(t){t.preventDefault(),await async function(t){const e=t.getAttribute("data-layout-id"),a=t.getAttribute("data-map-id");if(!e||!a)return;const c=t.closest(".tec-tickets__seating-tab__card");if(c.style.opacity=.5,confirm(o("delete-confirmation"))){const t=await async function(t,e){const a=new URL(n.ajaxUrl);return a.searchParams.set("_ajax_nonce",n.ajaxNonce),a.searchParams.set("layoutId",t),a.searchParams.set("mapId",e),a.searchParams.set("action","tec_tickets_seating_service_delete_layout"),200===(await fetch(a.toString(),{method:"POST"})).status}(e,a);return t?void window.location.reload():(c.style.opacity=1,void alert(o("delete-failed")))}c.style.opacity=1}(t.target)}async function s(t){await async function(t){const e=t.target.getAttribute("data-event-count");if(Number(e)>0){const a=t.target.closest(".tec-tickets__seating-tab__card");a.style.opacity=.5,confirm(o("edit-confirmation").replace("{count}",e))||(a.style.opacity=1,t.preventDefault())}}(t)}async function r(t){t.preventDefault(),await async function(t){const e=t.getAttribute("data-layout-id");if(!e)return void alert((0,c.getLocalizedString)("duplicate-failed","layouts"));t.disabled=!1;const a=t.closest(".tec-tickets__seating-tab__card");a.style.opacity=.5;const o=await async function(t){const e=new URL(n.ajaxUrl);e.searchParams.set("_ajax_nonce",n.ajaxNonce),e.searchParams.set("layoutId",t),e.searchParams.set("action",n.ACTION_DUPLICATE_LAYOUT);const a=await fetch(e.toString(),{method:"POST"});return await a.json()}(e);if(!o?.success)return alert((0,c.getLocalizedString)("duplicate-failed","layouts")),a.style.opacity=1,void(t.disabled=!1);(0,c.redirectTo)(o.data)}(t.target)}(0,c.onReady)((()=>{(document||document).querySelectorAll(".delete-layout").forEach((function(t){t.addEventListener("click",i)}))})),(0,c.onReady)((()=>{(document||document).querySelectorAll(".edit-layout").forEach((function(t){t.addEventListener("click",s)}))})),(0,c.onReady)((()=>{(document||document).querySelectorAll(".duplicate-layout").forEach((function(t){t.addEventListener("click",r)}))}));const d=window?.tec?.tickets?.seating?.layouts,{addLayoutModal:l}=d;async function u(t){const e=document.getElementById("tec-tickets-seating__select-map").selectedOptions[0].value,a=document.querySelector(".tec-tickets-seating__new-layout-wrapper");if(!e)return;t.target.disabled=!0,a.style.opacity=.5;const o=await async function(t){const e=new URL(n.ajaxUrl);e.searchParams.set("_ajax_nonce",n.ajaxNonce),e.searchParams.set("mapId",t),e.searchParams.set("action",n.ACTION_ADD_NEW_LAYOUT);const a=await fetch(e.toString(),{method:"POST"});return 200===a.status&&await a.json()}(e);o?(T(),(0,c.redirectTo)(o.data)):(alert((0,c.getLocalizedString)("add-failed","layouts")),a.style.opacity=1,t.target.disabled=!1)}function _(t){const e=t.target.options[t.target.selectedIndex];document.getElementById("tec-tickets-seating__new-layout-map-preview-img").src=e.getAttribute("data-screenshot-url"),document.querySelector(".tec-tickets-seating__new-layout-map-seats-count").innerHTML=e.getAttribute("data-seats-count"),document.querySelector(".tec-tickets-seating__new-layout-map-name").innerHTML=e.innerHTML}function T(){const t=window?.[l];t&&t._hide()}(0,c.onReady)((async()=>{await async function(){(await async function(){return new Promise((t=>{let e;const a=()=>{if(window[l])return clearTimeout(e),void t(window[l]);e=setTimeout(a,50)};a()}))}()).on("show",(()=>{!function(){const t=document.getElementById("tec-tickets-seating__select-map");t?.addEventListener("change",_);const e=document.querySelector(".tec-tickets-seating__new-layout-button-cancel");e?.addEventListener("click",T);const a=document.querySelector(".tec-tickets-seating__new-layout-button-add");a?.addEventListener("click",u)}()}))}()}))}},a={};function n(t){var c=a[t];if(void 0!==c)return c.exports;var o=a[t]={exports:{}};return e[t](o,o.exports,n),o.exports}n.m=e,t=[],n.O=(e,a,c,o)=>{if(!a){var i=1/0;for(l=0;l<t.length;l++){for(var[a,c,o]=t[l],s=!0,r=0;r<a.length;r++)(!1&o||i>=o)&&Object.keys(n.O).every((t=>n.O[t](a[r])))?a.splice(r--,1):(s=!1,o<i&&(i=o));if(s){t.splice(l--,1);var d=c();void 0!==d&&(e=d)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[a,c,o]},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={1490:0,4193:0,8352:0,9948:0};n.O.j=e=>0===t[e];var e=(e,a)=>{var c,o,[i,s,r]=a,d=0;if(i.some((e=>0!==t[e]))){for(c in s)n.o(s,c)&&(n.m[c]=s[c]);if(r)var l=r(n)}for(e&&e(a);d<i.length;d++)o=i[d],n.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return n.O(l)},a=globalThis.webpackChunkevent_tickets=globalThis.webpackChunkevent_tickets||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var c=n.O(void 0,[9948],(()=>n("c4TD")));c=n.O(c),window.tec=window.tec||{},window.tec.tickets=window.tec.tickets||{},window.tec.tickets.seating=window.tec.tickets.seating||{},window.tec.tickets.seating.admin=window.tec.tickets.seating.admin||{},window.tec.tickets.seating.admin.layouts=c})();